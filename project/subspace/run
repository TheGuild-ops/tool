apt-get update && apt-get upgrade -y
apt autoremove -y
df -h
PLOT_SIZE=100G
PNAME=subspace
VER=2a-2022-oct-06

i="0"
echo "enter how many?"
read d
while [ $i -lt $d ]
do
mkdir -p /root/node/subspace/$i
cd /root/node/subspace/$i
sudo docker run parity/subkey:latest  generate --network subspace_testnet --output-type json >> key.json
WALLET_ADDRESS=$(cat key.json | jq ".ss58Address" | tail -n -1)
echo { \"adress\" : "$WALLET_ADDRESS" } > keyLast.json

docker compose down
wget https://raw.githubusercontent.com/TheGuild-ops/tool/main/project/subspace/docker-compose.yaml -O install && bash install moniker $WALLET_ADDRESS $PLOT_SIZE $VER $i && rm install

docker compose up -d
chmod 777 -R data/
docker compose restart

i=$[$i+1]
done

cd 
i="0"
sudo tee <<EOF >/dev/null /root/node/$PNAME/cheack.sh
#!/bin/bash

i="0"
d="$d"
while [ \$i -lt \$d ]
do
cd /root/node/subspace/
docker-compose down
node cheack.js
docker-compose up -d
i=\$[\$i+1]
done

EOF


curl https://raw.githubusercontent.com/TheGuild-ops/tool/main/install/firewall  -o - -L | bash
